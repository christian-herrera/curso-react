import{k as l,v as p,a as h,A as n}from"./index-Dsy1RzdB.js";async function E(t,a=5e3){try{const o=await l.post("undefined/get-products",{limit:100},{timeout:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return p(o.data)}catch(o){throw new Error("Error en el servicio: "+o.message)}}async function m(t,a,o=5e3){try{const u=await l.post("undefined/delete-product",{id:a},{timeout:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return p(u.data)}catch(u){throw new Error("Error en el servicio: "+u.message)}}async function g(t,a,o,u,d,e,r=5e3){try{const s=new FormData;s.append("title",a),s.append("subtitle",o),s.append("description",u),s.append("price",d),s.append("image",e);const i=await l.post("undefined/add-product",s,{timeout:r,headers:{"Content-Type":"multipart/form-data; charset=UTF-8",Authorization:`Bearer ${t}`}});return p(i.data)}catch(s){throw new Error("Error en el servicio: delProductService"+s.message)}}function z(){const{token:t,onTokenExpired:a}=h();async function o(){try{let e=await E(t);return e.code===n.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:e.data}:e.code===n.TOKEN_EXPIRED||e.code===n.TOKEN_FAIL?(a(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}async function u(e){try{const r=await m(t,e);return r.code===n.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:r.data}:r.code===n.TOKEN_EXPIRED||r.code===n.TOKEN_FAIL?(a(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(r){return{success:!1,unauthorized:!1,message:r.message}}}async function d(e,r,s,i,f){try{const c=await g(t,e,r,s,i,f);return c.code===n.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:c.data}:c.code===n.TOKEN_EXPIRED||c.code===n.TOKEN_FAIL?(a(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al agregar el producto!"}}catch(c){return{success:!1,unauthorized:!1,message:c.message}}}return{getProductList:o,delProduct:u,addProduct:d}}export{z as u};
