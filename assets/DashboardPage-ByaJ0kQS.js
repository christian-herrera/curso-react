import{j as e,h,i as x,r as o,e as c,f as b}from"./index-DnGQr7Lo.js";import{u as j}from"./useProductList-BM55ECVO.js";function p({on_submit:r}){const a=t=>{const l=parseFloat(t.target.value||0).toFixed(2);t.target.value=l<0?"0.00":l};return e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title mb-3",children:"Agregar Producto"}),e.jsxs("form",{onSubmit:r,className:"container-fluid row px-0 mx-0",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"title",children:"Titulo"}),e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"price",children:"Precio"}),e.jsx("input",{type:"number",name:"price",id:"price",className:"form-control mb-3",step:"0.01",min:"0",onBlur:a,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitulo"}),e.jsx("input",{type:"text",name:"subtitle",id:"subtitle",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"description",children:"Descripci√≥n"}),e.jsx("textarea",{name:"description",id:"description",className:"form-control mb-3",rows:4,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"image",children:"Seleccione una foto"}),e.jsx("input",{type:"file",name:"image",id:"image",className:"form-control",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Agregar"})})]})]})})})}function N({productList:r=[],on_delProduct:a}){return e.jsx("div",{className:"col-12 mv-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title mb-3",children:"Listado Actual"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover align-middle table-bordered text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Titulo"}),e.jsx("th",{children:"Subtitulo"}),e.jsx("th",{className:"text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:r&&r.length>0?r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.subtitle}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"btn btn-sm btn-info mx-1",title:"Ver Descripci√≥n",onClick:()=>h("Descripci√≥n:",t.description),children:"üìÑ"}),e.jsx("button",{className:"btn btn-sm btn-info mx-1",title:"Ver Imagen",onClick:()=>x("Vista Previa",t.image),children:"üñºÔ∏è"}),e.jsx("button",{className:"btn btn-sm btn-danger mx-1",title:"Eliminar",onClick:()=>a(t.id),children:"üóëÔ∏è"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",children:"No hay archivos cargados."})})})]})})]})})})}function P(){const{getProductList:r,delProduct:a,addProduct:t}=j(),[l,d]=o.useState([]);async function i(){const s=await r();s.success?d(s.products):s.unauthorized||c("Error al obtener los datos!","error")}o.useEffect(()=>{i()},[]);const m=async s=>{s.preventDefault();const n=await t(s.target.title.value,s.target.subtitle.value,s.target.description.value,parseInt(s.target.price.value*100),s.target.image.files[0]);n.success?(c("Producto agregado correctamente","success"),s.target.reset(),i()):n.unauthorized||c("Error al agregar el producto","error")},u=async s=>{if(!(await b("Seguro?","Esta acci√≥n no se puede deshacer.")).isConfirmed)return;(await a(s)).success?(c("Producto eliminado correctamente","success"),i()):c("Error al eliminar el producto","error")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container pt-4",children:[e.jsx("h2",{className:"pb-2",children:"Panel de Administraci√≥n"}),e.jsxs("div",{className:"row",children:[e.jsx(p,{on_submit:m}),e.jsx(N,{productList:l,on_delProduct:u})]})]})})}export{P as default};
