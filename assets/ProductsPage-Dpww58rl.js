import{r as c,j as s,b as m,e as x}from"./index-zxfHPSYm.js";import{u}from"./useProductList-DRnLrwMh.js";function h({producto:e,onAgregar_fn:n,cantEnCarrito:r=0}){const[i,d]=c.useState(!0);return s.jsx("div",{className:"col-12 col-md-4",children:s.jsxs("div",{className:"card mb-4",children:[i&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"200px"},children:s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando imagen..."})})}),s.jsx("img",{src:e.image,className:"card-img-top mx-auto",onLoad:()=>d(!1),style:{height:"250px",objectFit:"contain",display:i?"none":"block"},alt:"Error..."}),s.jsxs("div",{className:"card-body",children:[s.jsx("h5",{className:"card-title",children:e.title}),s.jsx("p",{className:"card-text",children:e.description}),s.jsxs("p",{className:"card-text fs-4 d-flex align-items-center gap-2",children:["$",(e.price/100).toFixed(2),r>0&&s.jsx("span",{className:"badge text-bg-success",children:r})]}),s.jsx("button",{className:"btn btn-primary w-100",onClick:()=>n(e),children:"Agregar al carrito"})]})]})},e.id)}function p(){const{cart:e,cartAdd:n}=m(),{getProductList:r}=u(),[i,d]=c.useState([]),[l,o]=c.useState(!0);return c.useEffect(()=>{async function a(){const t=await r();t.success?(d(t.products),o(!1)):t.unauthorized||x("Error al obtener los datos!","error")}a()},[]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"container pt-4",children:[s.jsx("h2",{className:"pb-2",children:"Listado de Productos"}),l&&s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"my-5",children:"Consultando productos..."}),s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Consultando productos..."})})]}),!l&&s.jsx("div",{className:"row",children:i.map(a=>s.jsx(h,{producto:a,onAgregar_fn:n,cantEnCarrito:e.filter(t=>t.id===a.id)[0]?.quantity},a.id))})]})})}export{p as default};
