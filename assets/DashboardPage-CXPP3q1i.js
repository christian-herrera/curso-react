import{j as e,h as p,i as g,r as o,e as l,f as N}from"./index-DeqvurjS.js";import{u as f,P as v}from"./useProductList-CPUslXJp.js";function P({on_submit:r}){const c=t=>{const i=parseFloat(t.target.value||0).toFixed(2);t.target.value=i<0?"0.00":i};return e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title mb-3 fs-4",children:"Agregar Producto"}),e.jsxs("form",{onSubmit:r,className:"container-fluid row px-0 mx-0",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"title",children:"Titulo"}),e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"price",children:"Precio"}),e.jsx("input",{type:"number",name:"price",id:"price",className:"form-control mb-3",step:"0.01",min:"0",onBlur:c,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitulo"}),e.jsx("input",{type:"text",name:"subtitle",id:"subtitle",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"description",children:"DescripciÃ³n"}),e.jsx("textarea",{name:"description",id:"description",className:"form-control mb-3",rows:4,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"image",children:"Seleccione una foto"}),e.jsx("input",{type:"file",name:"image",id:"image",className:"form-control",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Agregar"})})]})]})})})}function w({productList:r=[],on_delProduct:c}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover align-middle table-bordered text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-50",children:"Titulo"}),e.jsx("th",{className:"w-25",children:"Subtitulo"}),e.jsx("th",{className:"w-25 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:r&&r.length>0?r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.subtitle}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"btn btn-sm btn-info mx-1",title:"Ver DescripciÃ³n",onClick:()=>p("DescripciÃ³n:",t.description),children:"ðŸ“„"}),e.jsx("button",{className:"btn btn-sm btn-info mx-1",title:"Ver Imagen",onClick:()=>g("Vista Previa",t.image),children:"ðŸ–¼ï¸"}),e.jsx("button",{className:"btn btn-sm btn-danger mx-1",title:"Eliminar",onClick:()=>c(t.id),children:"ðŸ—‘ï¸"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",children:"No hay archivos cargados."})})})]})})}function D(){const{getProductList:r,delProduct:c,addProduct:t}=f(),[i,m]=o.useState([]),[d,u]=o.useState(1),[h,x]=o.useState(1);async function n(s=d){const a=await r(s);a.success?(m(a.data.products),x(a.data.total_pages),u(s)):a.unauthorized||l("Error al obtener los datos!","error")}o.useEffect(()=>{n(1)},[]);const b=async s=>{s.preventDefault();const a=await t(s.target.title.value,s.target.subtitle.value,s.target.description.value,parseInt(s.target.price.value*100),s.target.image.files[0]);a.success?(l("Producto agregado correctamente","success"),s.target.reset(),n()):a.unauthorized||l("Error al agregar el producto","error")},j=async s=>{if(!(await N("Seguro?","Esta acciÃ³n no se puede deshacer.")).isConfirmed)return;(await c(s)).success?(l("Producto eliminado correctamente","success"),n()):l("Error al eliminar el producto","error")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container pt-4",children:[e.jsx("h2",{className:"pb-2",children:"Panel de AdministraciÃ³n"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title mb-3 fs-4",children:"Listado Actual"}),e.jsx(w,{productList:i,on_delProduct:j}),e.jsx(v,{currentPage:d,totalPages:h,onPageChange:s=>n(s)})]})})}),e.jsx(P,{on_submit:b})]})]})})}export{D as default};
