import{i as n,v as i,u as m,A as a}from"./index-CzjWc_DK.js";async function E(t,s,o=5e3){try{const r=await n.post("https://leme.myqnapcloud.com:60502/api/get-products",{page:t},{timeout:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});return i(r.data)}catch(r){throw new Error("Error en el servicio: "+r.message)}}async function g(t,s,o=5e3){try{const r=await n.post("https://leme.myqnapcloud.com:60502/api/search-products",{query:t},{timeout:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});return i(r.data)}catch(r){throw new Error("Error en el servicio: "+r.message)}}async function y(t,s,o=5e3){try{const r=await n.post("https://leme.myqnapcloud.com:60502/api/delete-product",{id:s},{timeout:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return i(r.data)}catch(r){throw new Error("Error en el servicio: "+r.message)}}async function z(t,s,o,r,d,l,c=5e3){try{const e=new FormData;e.append("title",s),e.append("subtitle",o),e.append("description",r),e.append("price",d),e.append("image",l);const p=await n.post("https://leme.myqnapcloud.com:60502/api/add-product",e,{timeout:c,headers:{"Content-Type":"multipart/form-data; charset=UTF-8",Authorization:`Bearer ${t}`}});return i(p.data)}catch(e){throw new Error("Error en el servicio: delProductService"+e.message)}}function w(){const{token:t,onTokenExpired:s}=m();async function o(c){try{let e=await E(c,t);return e.code===a.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,data:e.data}:e.code===a.TOKEN_EXPIRED||e.code===a.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inv치lido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}async function r(c){try{const e=await y(t,c);return e.code===a.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:e.data}:e.code===a.TOKEN_EXPIRED||e.code===a.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inv치lido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}async function d(c,e,p,h,f){try{const u=await z(t,c,e,p,h,f);return u.code===a.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:u.data}:u.code===a.TOKEN_EXPIRED||u.code===a.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inv치lido o expirado"}):{success:!1,unauthorized:!1,message:"Error al agregar el producto!"}}catch(u){return{success:!1,unauthorized:!1,message:u.message}}}async function l(c){try{let e=await g(c,t);return e.code===a.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,data:e.data}:e.code===a.TOKEN_EXPIRED||e.code===a.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inv치lido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}return{getProductList:o,delProduct:r,addProduct:d,getProductsWithQuery:l}}export{w as u};
