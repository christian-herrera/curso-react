import{r as h,j as l,k as f,v as m,a as E,A as u}from"./index-C9oGyJlx.js";function k({currentPage:r,totalPages:s,onPageChange:i}){let c=r-2,t=r+2;s<=4?(c=1,t=s):(c<1&&(t+=1-c,c=1),t>s&&(c-=t-s,t=s));const e=[];for(let o=c;o<=t;o++)e.push(o);const a=()=>{r>1&&i(r-1)},p=()=>{r<s&&i(r+1)};return h.useEffect(()=>{const o=d=>{d.key==="ArrowLeft"&&a(),d.key==="ArrowRight"&&p()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r,s]),l.jsx("nav",{"aria-label":"Páginación de items",children:l.jsxs("ul",{className:"pagination justify-content-center",children:[l.jsx("li",{className:"page-item",children:l.jsx("a",{className:`page-link ${r===1?"disabled":""}`,tabIndex:"-1",style:{cursor:"pointer"},onClick:a,children:"Anterior"})}),e.map(o=>l.jsx("li",{className:`page-item ${o===r?"active":""}`,children:l.jsx("button",{className:"page-link",onClick:()=>i(o),style:{cursor:"pointer"},children:o})},o)),l.jsx("li",{className:"page-item",children:l.jsx("a",{className:"page-link",style:{cursor:"pointer"},onClick:p,children:"Siguiente"})})]})})}async function y(r,s,i=5e3){try{const n=await f.post("https://leme.myqnapcloud.com:60502/api/get-products",{page:r},{timeout:i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});return m(n.data)}catch(n){throw new Error("Error en el servicio: "+n.message)}}async function w(r,s,i=5e3){try{const n=await f.post("https://leme.myqnapcloud.com:60502/api/delete-product",{id:s},{timeout:i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});return m(n.data)}catch(n){throw new Error("Error en el servicio: "+n.message)}}async function x(r,s,i,n,c,t,e=5e3){try{const a=new FormData;a.append("title",s),a.append("subtitle",i),a.append("description",n),a.append("price",c),a.append("image",t);const p=await f.post("https://leme.myqnapcloud.com:60502/api/add-product",a,{timeout:e,headers:{"Content-Type":"multipart/form-data; charset=UTF-8",Authorization:`Bearer ${r}`}});return m(p.data)}catch(a){throw new Error("Error en el servicio: delProductService"+a.message)}}function z(){const{token:r,onTokenExpired:s}=E();async function i(t){try{let e=await y(t,r);return e.code===u.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,data:e.data}:e.code===u.TOKEN_EXPIRED||e.code===u.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}async function n(t){try{const e=await w(r,t);return e.code===u.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:e.data}:e.code===u.TOKEN_EXPIRED||e.code===u.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al obtener los datos!"}}catch(e){return{success:!1,unauthorized:!1,message:e.message}}}async function c(t,e,a,p,o){try{const d=await x(r,t,e,a,p,o);return d.code===u.DB_QUERY_SUCCESS?{success:!0,unauthorized:!1,products:d.data}:d.code===u.TOKEN_EXPIRED||d.code===u.TOKEN_FAIL?(s(),{success:!1,unauthorized:!0,message:"Token inválido o expirado"}):{success:!1,unauthorized:!1,message:"Error al agregar el producto!"}}catch(d){return{success:!1,unauthorized:!1,message:d.message}}}return{getProductList:i,delProduct:n,addProduct:c}}export{k as P,z as u};
