import{j as e,g,h as N,r as n,e as l,s as f}from"./index-CzjWc_DK.js";import{u as v}from"./useProductList-qG79Ef1O.js";import{c as m}from"./AppRouter-DRyrcarK.js";import{D as P}from"./Delete-BmfduR47.js";import{P as y}from"./Paginator-8JJmikHW.js";function w({on_submit:a}){const c=t=>{const i=parseFloat(t.target.value||0).toFixed(2);t.target.value=i<0?"0.00":i};return e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title mb-3 fs-4",children:"Agregar Producto"}),e.jsxs("form",{onSubmit:a,className:"container-fluid row px-0 mx-0",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"title",children:"Titulo"}),e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"price",children:"Precio"}),e.jsx("input",{type:"number",name:"price",id:"price",className:"form-control mb-3",step:"0.01",min:"0",onBlur:c,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitulo"}),e.jsx("input",{type:"text",name:"subtitle",id:"subtitle",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"description",children:"Descripci贸n"}),e.jsx("textarea",{name:"description",id:"description",className:"form-control mb-3",rows:4,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"image",children:"Seleccione una foto"}),e.jsx("input",{type:"file",name:"image",id:"image",className:"form-control",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Agregar"})})]})]})})})}const S=m(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),D=m(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}));function F({productList:a=[],on_delProduct:c}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover align-middle table-bordered text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-50",children:"Titulo"}),e.jsx("th",{className:"w-25",children:"Subtitulo"}),e.jsx("th",{className:"w-25 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:a&&a.length>0?a.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.subtitle}),e.jsxs("td",{className:"text-center",children:[e.jsx(D,{onClick:()=>g("Descripci贸n:",t.description),style:{cursor:"pointer"},className:"mx-1"}),e.jsx(S,{onClick:()=>N("Vista Previa",t.image),style:{cursor:"pointer"},className:"mx-1"}),e.jsx(P,{onClick:()=>c(t.id),style:{cursor:"pointer"},className:"mx-1"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",children:"No hay archivos cargados."})})})]})})}function T(){const{getProductList:a,delProduct:c,addProduct:t}=v(),[i,u]=n.useState([]),[d,h]=n.useState(1),[x,j]=n.useState(1);async function o(s=d){const r=await a(s);r.success?(u(r.data.products),j(r.data.total_pages),h(s)):r.unauthorized||l("Error al obtener los datos!","error")}n.useEffect(()=>{o(1)},[]);const p=async s=>{s.preventDefault();const r=await t(s.target.title.value,s.target.subtitle.value,s.target.description.value,parseInt(s.target.price.value*100),s.target.image.files[0]);r.success?(l("Producto agregado correctamente","success"),s.target.reset(),o()):r.unauthorized||l("Error al agregar el producto","error")},b=async s=>{if(!(await f("Seguro?","Esta acci贸n no se puede deshacer.")).isConfirmed)return;(await c(s)).success?(l("Producto eliminado correctamente","success"),o()):l("Error al eliminar el producto","error")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container pt-4",children:[e.jsx("h2",{className:"pb-2",children:"Panel de Administraci贸n"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title mb-3 fs-4",children:"Listado Actual"}),e.jsx(F,{productList:i,on_delProduct:b}),e.jsx(y,{currentPage:d,totalPages:x,onPageChange:s=>o(s)})]})})}),e.jsx(w,{on_submit:p})]})]})})}export{T as default};
