import{j as e,g as b,h as p,r as i,e as n,s as N}from"./index-oY5MYDJF.js";import{u as g}from"./useProductList-q_ITc3Ld.js";import{c as d}from"./AppRouter-DURGc1Ku.js";import{D as f}from"./Delete-BZr3W750.js";import{P as v}from"./Paginator-B1QQQ4wP.js";function P({on_submit:t}){const r=s=>{const c=parseFloat(s.target.value||0).toFixed(2);s.target.value=c<0?"0.00":c};return e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h3",{className:"card-title mb-3 fs-4",children:["Agregar Producto ",e.jsx("span",{className:"badge bg-warning",children:"Deshabilitado"})]}),e.jsxs("form",{onSubmit:t,className:"container-fluid row px-0 mx-0",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"title",children:"Titulo"}),e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label",htmlFor:"price",children:"Precio"}),e.jsx("input",{type:"number",name:"price",id:"price",className:"form-control mb-3",step:"0.01",min:"0",onBlur:r,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitulo"}),e.jsx("input",{type:"text",name:"subtitle",id:"subtitle",className:"form-control mb-3",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"description",children:"Descripci贸n"}),e.jsx("textarea",{name:"description",id:"description",className:"form-control mb-3",rows:4,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",htmlFor:"image",children:"Seleccione una foto"}),e.jsx("input",{type:"file",name:"image",id:"image",className:"form-control",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Agregar"})})]})]})})})}const y=d(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),w=d(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}));function S({productList:t=[],on_delProduct:r}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover align-middle table-bordered text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-50",children:"Titulo"}),e.jsx("th",{className:"w-25",children:"Subtitulo"}),e.jsx("th",{className:"w-25 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:t&&t.length>0?t.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.subtitle}),e.jsxs("td",{className:"text-center",children:[e.jsx(w,{onClick:()=>b("Descripci贸n:",s.description),style:{cursor:"pointer"},className:"mx-1"}),e.jsx(y,{onClick:()=>p("Vista Previa",s.image),style:{cursor:"pointer"},className:"mx-1"}),e.jsx(f,{onClick:()=>r(s.id),style:{cursor:"pointer"},className:"mx-1"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",children:"No hay archivos cargados."})})})]})})}function H(){const{getProductList:t}=g(),[r,s]=i.useState([]),[c,m]=i.useState(1),[h,u]=i.useState(1);async function o(a=c){const l=await t(a);l.success?(s(l.data.products),u(l.data.total_pages),m(a)):l.unauthorized||n("Error al obtener los datos!","error")}i.useEffect(()=>{o(1)},[]);const x=async a=>{a.preventDefault(),n("Producto agregado correctamente","success"),a.target.reset()},j=async a=>{(await N("Seguro?","Esta acci贸n no se puede deshacer.")).isConfirmed&&(n("Producto eliminado correctamente","success"),o())};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container pt-4",children:[e.jsx("h2",{className:"pb-2",children:"Panel de Administraci贸n"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title mb-3 fs-4",children:"Listado Actual"}),e.jsx(S,{productList:r,on_delProduct:j}),e.jsx(v,{currentPage:c,totalPages:h,onPageChange:a=>o(a)})]})})}),e.jsx(P,{on_submit:x})]})]})})}export{H as default};
