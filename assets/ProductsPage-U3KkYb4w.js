import{r,j as s,b as j,e as p}from"./index-DeqvurjS.js";import{u as f,P as N}from"./useProductList-CPUslXJp.js";function b({producto:e,onAgregar_fn:i,cantEnCarrito:c=0}){const[n,d]=r.useState(!0);return s.jsx("div",{className:"col-12 col-md-4",children:s.jsxs("div",{className:"card mb-4",children:[n&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"200px"},children:s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando imagen..."})})}),s.jsx("img",{src:e.image,className:"card-img-top mx-auto",onLoad:()=>d(!1),style:{height:"250px",objectFit:"contain",display:n?"none":"block"},alt:"Error..."}),s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{className:"card-title fs-5",children:e.title}),s.jsx("p",{className:"card-text",children:e.description}),s.jsxs("p",{className:"card-text fs-4 d-flex align-items-center gap-2",children:["$",(e.price/100).toFixed(2),c>0&&s.jsx("span",{className:"badge text-bg-success",children:c})]}),s.jsx("button",{className:"btn btn-primary w-100",onClick:()=>i(e),children:"Agregar al carrito"})]})]})},e.id)}function y(){const{cart:e,cartAdd:i}=j(),{getProductList:c}=f(),[n,d]=r.useState(1),[m,u]=r.useState(1),[x,g]=r.useState([]),[l,h]=r.useState(!0);async function o(a=n){const t=await c(a);t.success?(g(t.data.products),u(t.data.total_pages),d(a),h(!1)):t.unauthorized||p("Error al obtener los datos!","error")}return r.useEffect(()=>{o(1)},[]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"container pt-4",children:[s.jsx("h2",{className:"pb-2",children:"Listado de Productos"}),l&&s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"my-5",children:"Consultando productos..."}),s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Consultando productos..."})})]}),!l&&s.jsxs("div",{className:"row",children:[x.map(a=>s.jsx(b,{producto:a,onAgregar_fn:i,cantEnCarrito:e.filter(t=>t.id===a.id)[0]?.quantity},a.id)),s.jsx(N,{currentPage:n,totalPages:m,onPageChange:a=>o(a)})]})]})})}export{y as default};
